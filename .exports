echo "start .exports"

### Language ###
export LANG=en_US.UTF-8

### Compilation Flags ###
export ARCHFLAGS="-arch x86_64"

### SSH ###
export SSH_KEY_PATH="~/.ssh/rsa_id"

# SSH Editor #
if [[ -n "$SSH_CONNECTION" ]]; then
	export EDITOR="vim"
else
	export EDITOR="mvim"
fi

if [[ `grep Microsoft /proc/version` ]]; then
	export DISPLAY="localhost:0.0"
fi

### Homebrew ###
if [[ $OSTYPE == "linux-gnu" ]]; then
	[ -d "$HOME/.linuxbrew" ] && \
		export PATH="$HOME/.linuxbrew/bin:$PATH" && \
		export MANPATH="$HOME/.linuxbrew/share/man:$MANPATH" && \
		export INFOPATH="$HOME/.linuxbrew/share/info:$INFOPATH"
elif [[ $OSTYPE == "darwin" ]]; then
	[ `isInstalled brew` == "1" ] && export PATH="/usr/local/bin:$PATH"
fi

if [[ `isInstalled brew` == "1" ]]; then
	# Ruby #
	if [[ `brew list rbenv 2> /dev/null` ]]; then
		if [[ `brew list ruby-build 2> /dev/null` ]]; then
			export PATH="$HOME/.rbenv/bin:$HOME/.rbenv/plugins/ruby-build/bin:$PATH"
			RBENV_VER=$(rbenv install -l | egrep -v - | tail -1 | tr -d ' ')
			export GEM_HOME=$HOME/.rbenv/versions/$RBENV_VER/lib/ruby/gems/$RBENV_VER
			export GEM_PATH=$HOME/.rbenv/versions/$RBENV_VER/lib/ruby/gems/$RBENV_VER
			echo $RBENV_VER > ~/.ruby-version
			if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi
		else
			brew install ruby-build
		fi # ruby-build
	else
		brew install rbenv
	fi # rbenv
	### ZSH ###
	if [[ -n "$ZSH_VERSION" ]]; then
		if [[ -d ~/.oh-my-zsh/custom/plugins/zsh-completions/ ]]; then
			if [ ! -L ~/.oh-my-zsh/custom/plugins/zsh-completions/ ]; then
				git clone https://gitlab.com/zsh-users/zsh-completions ~/.oh-my-zsh/custom/plugins/zsh-completions
				autoload -U compinit
				compinit
			fi
		fi # zsh-completions

		if [ ! -d ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting/ ]; then
			if [ ! -L ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting/ ]; then
				git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting	
				autoload -U compinit
				compinit
			fi
		fi # zsh-syntax-highlighting
	fi # ZSH
else
	if [[ "$OSTYPE" == "linux-gnu" ]]; then
		ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Linuxbrew/install/master/install)"
		export PATH="$HOME/.linuxbrew/bin:$PATH"	
	elif [[ "$OSTYPE" == "darwin" ]]; then
		ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
	fi
fi # Homebrew

### SQLite ###
# export PATH="/usr/local/opt/sqlite/bin:$PATH"
# export PATH="/usr/local/opt/apr/bin:$PATH"
# export PATH="/usr/local/opt/apr-util/bin:$PATH"

# export PATH=/usr/local/bin:/usr/local/sbin:$PATH

echo "end .exports"
